
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){let Asside=require('./modules/asside.js');let GoUp=require('./modules/go-up');let Footer=require('./modules/footer');let ScalePhoto=require('./modules/scale-photo');let Accordion=require('./modules/accordion');let Request=require('./modules/request');let Modal=require('./modules/modal-window');let Form=require('./modules/form');let Comment=require('./modules/comment');document.addEventListener('DOMContentLoaded',()=>{let body=document.querySelector('body');let nav=document.querySelector('nav');let mainSection=document.querySelector('.main-section');let foot=document.querySelector('footer');$(window).on('load',function(){body.style.position='relative';nav.style.opacity='1';mainSection.style.opacity='0.95';foot.style.opacity='1';$('.loader').fadeOut(500);});let tree=new ClassyLeaves({leaves:50,maxY:5,multiplyOnClick:true,multiply:1,infinite:true,speed:3000,numImages:8,folder:'/assets/leaves/images/leaves/'});let asside=new Asside().init();let goUp=new GoUp().init();let footer=new Footer().init();let scalePhoto=new ScalePhoto().init();let accordion=new Accordion().init();let getRequest=new Request().get();let modal=new Modal();let form=new Form().init();setTimeout(()=>{let comment=new Comment().init();},1300);});},{"./modules/accordion":2,"./modules/asside.js":3,"./modules/comment":4,"./modules/footer":5,"./modules/form":6,"./modules/go-up":7,"./modules/modal-window":9,"./modules/request":10,"./modules/scale-photo":11}],2:[function(require,module,exports){class Accordion{constructor(){this.accordion=document.querySelector(".accordion");}
init(){this.accordion.addEventListener('click',(e)=>{let pressButton=e.target;if(!pressButton.classList.contains('accordion-button'))return
window.location='#gallery'});}}
module.exports=Accordion;},{}],3:[function(require,module,exports){class Asside{constructor(){this.asside=document.querySelector('.asside');this.showAssideBtn=document.querySelector('.nav__menu');this.hideAssideBtn=document.querySelector('.asside__close');}
init(){this.showAssideBtn.addEventListener('click',()=>{this.asside.style.right='0';})
this.hideAssideBtn.addEventListener('click',()=>{this.asside.style.right='-300px';})}}
module.exports=Asside;},{}],4:[function(require,module,exports){class Comment{constructor(){let Request=require('./request');this.request=new Request();this.currentComment=null;this.pswd='17021991';}
init(){document.addEventListener('click',(e)=>{if(!e.target.matches('.comment__icon'))return;let apply=prompt('Введите пароль...');if(apply==this.pswd){this.currentComment=e.target.parentElement.dataset.id;this.request.delete(this.currentComment);setTimeout(()=>{this.currentComment=null;this.request.get();},1300);}else if(apply===null||apply===undefined){return;}else{alert("Пароль неверный!")}});}}
module.exports=Comment;},{"./request":10}],5:[function(require,module,exports){class Footer{constructor(){this.footer=document.querySelector('.footer-licence');}
init(){let date=new Date();let year=date.toLocaleDateString().slice(6);this.footer.append(`© Made by Gup@lyuk 2021-${year}`);}}
module.exports=Footer;},{}],6:[function(require,module,exports){class Form{constructor(){}
init(){let formContainer=document.querySelector('.proposition-form');let form=formContainer.querySelector('.form');let propName=formContainer.querySelector('.propos-name');let propEmail=formContainer.querySelector('.propos-email');let propTelephone=formContainer.querySelector('.propos-phone');let propText=formContainer.querySelector('.propos-text');let formSendBtn=formContainer.querySelector('.propos-btn');formSendBtn.addEventListener('click',()=>{if(propName.value.trim()===''||propEmail.value.trim()===''||propTelephone.value.trim()===''||propText.value.trim()===''){for(let i=0;i<form.children.length-1;i++){if(form.children[i].value.trim()===''){form.children[i].style.border='2px solid orangered';}
if(form.children[i].value.trim()!==''){form.children[i].style.border='';}}
return}
let request={name:propName.value,mail:propEmail.value,phone:propTelephone.value,message:propText.value};fetch(`https://formspree.io/f/xyyvgrww`,{headers:{'Content-Type':'application/json',},method:'POST',body:JSON.stringify(request)}).then(resp=>console.log(resp));let before=document.querySelector('.before');let beforeText=document.querySelector('.before p');before.style.width='calc(100% + 20px)';before.style.borderBottomLeftRadius='10px';before.style.borderTopLeftRadius='10px';beforeText.style.fontSize='30px';beforeText.style.transitionDuration='500ms';for(let i=0;i<form.children.length-1;i++){form.children[i].style.border='';}
setTimeout(()=>{propName.value='';propEmail.value='';propTelephone.value='';propText.value='';},1000);setTimeout(()=>{beforeText.style.transitionDuration='0ms';beforeText.style.fontSize='0';before.style.width='20px';before.style.borderBottomLeftRadius='';before.style.borderTopLeftRadius='';},2000);})}}
module.exports=Form;},{}],7:[function(require,module,exports){class GoUp{constructor(){this.getUp=document.querySelector('.get-up');this.section=document.querySelector('.main-section');}
init(){window.addEventListener('scroll',()=>{let currentPosition=this.section.getBoundingClientRect().y;if(currentPosition<=75){this.getUp.style.opacity='1';}
if(currentPosition>75){this.getUp.style.opacity='0';}
if(window.innerWidth<=660&&currentPosition<=60){this.getUp.style.opacity='1';}
if(window.innerWidth<=660&&currentPosition>=65){this.getUp.style.opacity='0';}});}}
module.exports=GoUp;},{}],8:[function(require,module,exports){class Message{constructor(name,text,time){this.name=name;this.text=text;this.time=time;}}
module.exports=Message;},{}],9:[function(require,module,exports){class ModalWindow{constructor(){let Request=require('./request');this.request=new Request();this.windowRoot=document.querySelector('.modal');this.acceptBtn=this.windowRoot.querySelector('.btn-apl');this.closeBtn=this.windowRoot.querySelector('.btn-cls');this.userNameInput=this.windowRoot.querySelector('.input-name');this.userTextInput=this.windowRoot.querySelector('.input-text');this.acceptBtn.addEventListener('click',()=>this.sendMessage());this.closeBtn.addEventListener('click',()=>this.rejectInput());}
rejectInput(){setTimeout(()=>{this.userNameInput.value='';this.userTextInput.value='';},500);}
sendMessage(){if(this.userNameInput.value.trim()===''||this.userTextInput.value.trim()===''){alert('Вы что-то не указали. Комментарий НЕ будет сохранен!');setTimeout(()=>{this.userNameInput.value='';this.userTextInput.value='';},500);return}else{let Message=require('./message');this.windowRoot.style.display='none';let getDate=new Date();this.request.post(new Message(this.userNameInput.value,this.userTextInput.value,getDate.toLocaleString()))
setTimeout(()=>{this.userNameInput.value='';this.userTextInput.value='';this.request.get();},1000);}}}
module.exports=ModalWindow;},{"./message":8,"./request":10}],10:[function(require,module,exports){class Request{constructor(){this.root=document.querySelector('.all-comments');}
get(){this.root.innerHTML='';fetch(Request.url).then(response=>response.json()).then(response=>this.root.append(...response.map(e=>createElement(e))));function createElement(elem){let element=document.createElement('div');element.classList.add('comment');element.dataset.id=`${elem.id}`
let icon=document.createElement('div');icon.classList.add('comment__icon');let name=document.createElement('div');name.classList.add('comment__name');name.append(elem.name);let time=document.createElement('div');time.classList.add('comment__time');time.append(elem.time);let text=document.createElement('div');text.classList.add('comment__text');let commentSpanStart=document.createElement('span')
commentSpanStart.append('«');let commentSpanSEnd=document.createElement('span')
commentSpanSEnd.append('»');text.append(elem.text);text.prepend(commentSpanStart);text.append(commentSpanSEnd);element.append(icon);element.append(name);element.append(time);element.append(text);return element;}}
post(data){fetch(Request.url,{headers:{'Content-Type':'application/json','Accept':'application/json'},method:'POST',body:JSON.stringify(data)});}
delete(comment){fetch(`https://61fac1d387801d0017a2c252.mockapi.io/example/comments/${comment}`,{method:'DELETE'});}}
Request.url='https://61fac1d387801d0017a2c252.mockapi.io/example/comments';module.exports=Request;},{}],11:[function(require,module,exports){class ScalePhoto{init(){let bodyElement=document.querySelector('body');let modalWindow=document.querySelector('.modal-window');let modalLeft=document.querySelector('.left');let modalRight=document.querySelector('.right');let modalClose=document.querySelector('.close');let currPhotoIndex=null;let currSectionName=null;document.addEventListener('click',e=>showPhoto(e));modalClose.addEventListener('click',()=>close());modalRight.addEventListener('click',()=>getNextPhoto());modalLeft.addEventListener('click',()=>getPrevPhoto());function showPhoto(e){let image=e.target;if(!image.matches('.photo'))return
currSectionName=`.${image.parentElement.className}`;let currentSection=document.querySelector(currSectionName);if(currentSection.children.length===1){modalLeft.style.display='none';modalRight.style.display='none';}else{modalLeft.style.display='block';modalRight.style.display='block';}
setDataIndex(currentSection);currPhotoIndex=image.dataset.index;bodyElement.style.overflow='hidden';let currentPhoto=currentSection.children[currPhotoIndex];let currentPhotoLink=currentPhoto.getAttribute('src');let bigPhoto=document.createElement('img');bigPhoto.setAttribute('src',currentPhotoLink);bigPhoto.classList.add('big-photo');bigPhoto.dataset.index=currPhotoIndex;modalWindow.prepend(bigPhoto);modalWindow.style.display='flex';}
function close(){modalWindow.style.display='none';bodyElement.style.overflow='';modalWindow.firstElementChild.remove();document.removeEventListener('click',showPhoto);}
function getNextPhoto(){let section=document.querySelector(currSectionName);let modalElementIndex=modalWindow.firstElementChild.dataset.index;let sectionElementIndex=section.children[modalElementIndex].dataset.index;let nextIndex=(sectionElementIndex*1+1);if(nextIndex===section.children.length){nextIndex=section.firstElementChild.dataset.index;}
let nextLink=section.children[nextIndex].getAttribute('src');modalWindow.firstElementChild.setAttribute('src',nextLink);modalWindow.firstElementChild.dataset.index=nextIndex;}
function getPrevPhoto(){let section=document.querySelector(currSectionName);let modalElementIndex=modalWindow.firstElementChild.dataset.index;let sectionElementIndex=section.children[modalElementIndex].dataset.index;let prevIndex=(sectionElementIndex*1-1);if(prevIndex<0){prevIndex=section.lastElementChild.dataset.index;}
let prevLink=section.children[prevIndex].getAttribute('src');modalWindow.firstElementChild.setAttribute('src',prevLink);modalWindow.firstElementChild.dataset.index=prevIndex;}
function setDataIndex(section){for(let i=0;i<section.children.length;i++){section.children[i].dataset.index=i;}}}}
module.exports=ScalePhoto;},{}]},{},[1])