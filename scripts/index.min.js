
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){let Asside=require('./modules/asside.js');let GoUp=require('./modules/go-up');let Footer=require('./modules/footer');let ScalePhoto=require('./modules/scale-photo');let Accordion=require('./modules/accordion');let Request=require('./modules/request');let Modal=require('./modules/modal-window');let Form=require('./modules/form');let Comment=require('./modules/comment');let ShowHideComments=require('./modules/show-hide-comments');let ChangeNav=require('./modules/change-nav');let ChoosePersons=require('./modules/choose-persons');let ShowTrailer=require('./modules/show-trailer');let GetFullMinScreen=require('./modules/get-full-min-screen');let ChooseMainPersonTitle=require('./modules/choose-main-person-title');document.addEventListener('DOMContentLoaded',()=>{let asside=new Asside().init();let goUp=new GoUp().init();let footer=new Footer().init();let scalePhoto=new ScalePhoto().init();let accordion=new Accordion().init();let getRequest=new Request().getLast();let modal=new Modal();let form=new Form().init();let showHideComments=new ShowHideComments().init();let changeNav=new ChangeNav().init();let choosePersons=new ChoosePersons().init();let showTrailer=new ShowTrailer().init();let getFullMinScreen=new GetFullMinScreen().init();let chooseMainPersonTitle=new ChooseMainPersonTitle().init();setTimeout(()=>{let comment=new Comment().init();},1000);});$(window).on('load',function(){let tree=new ClassyLeaves({leaves:50,maxY:5,multiplyOnClick:true,multiply:1,infinite:true,speed:3000,numImages:8,folder:'/assets/leaves/images/leaves/'});let body=document.querySelector('body');let nav=document.querySelector('nav');let mainSection=document.querySelector('.main-section');let foot=document.querySelector('footer');body.style.position='relative';nav.style.opacity='1';mainSection.style.opacity='0.98';foot.style.opacity='1';$('.loader').fadeOut(500);});},{"./modules/accordion":2,"./modules/asside.js":3,"./modules/change-nav":4,"./modules/choose-main-person-title":5,"./modules/choose-persons":6,"./modules/comment":7,"./modules/footer":8,"./modules/form":9,"./modules/get-full-min-screen":10,"./modules/go-up":11,"./modules/modal-window":13,"./modules/request":14,"./modules/scale-photo":15,"./modules/show-hide-comments":16,"./modules/show-trailer":17}],2:[function(require,module,exports){class Accordion{constructor(){this.accordion=document.querySelector(".accordion");this.accordionFlush=document.querySelector(".accordion-flush");}
init(){this.accordion.addEventListener('click',(e)=>{let pressButton=e.target;if(!pressButton.classList.contains('accordion-button'))return
window.location='#gallery-flush'});this.accordionFlush.addEventListener('click',(e)=>{let pressButton=e.target;if(!pressButton.classList.contains('accordion-button'))return
window.location='#gallery-flush'});}}
module.exports=Accordion;},{}],3:[function(require,module,exports){class Asside{constructor(){this.asside=document.querySelector('.asside');this.showAssideBtn=document.querySelector('.nav__menu');this.hideAssideBtn=document.querySelector('.asside__close');}
init(){this.showAssideBtn.addEventListener('click',()=>this.show())
this.hideAssideBtn.addEventListener('click',()=>this.hide())}
show(){this.asside.style.right='0';}
hide(){this.asside.style.right='-300px';}}
module.exports=Asside;},{}],4:[function(require,module,exports){class ChangeNav{constructor(){let Asside=require('./asside');this.asside=new Asside();this.mainBtnNav=document.querySelector('.nav__links .main-btn');this.personsBtnNav=document.querySelector('.nav__links .persons-btn');this.locationsBtnNav=document.querySelector('.nav__links .locations-btn');this.mainBtnAsside=document.querySelector('.asside__links .main-btn');this.personsBtnAsside=document.querySelector('.asside__links .persons-btn');this.locationsBtnAsside=document.querySelector('.asside__links .locations-btn');this.mainSection=document.querySelector('.main');this.personsSection=document.querySelector('.persons-section');}
init(){this.mainBtnNav.addEventListener('click',()=>{this.mainSection.style.display='block';this.personsSection.style.display='none';window.location.href='#';});this.personsBtnNav.addEventListener('click',()=>{this.mainSection.style.display='none';this.personsSection.style.display='block';$("#accordion1").accordion({active:'none'});$("#accordion2").accordion({active:'none'});window.location.href='#';});this.mainBtnAsside.addEventListener('click',()=>{this.mainSection.style.display='block';this.personsSection.style.display='none';this.asside.hide();window.location.href='#';});this.personsBtnAsside.addEventListener('click',()=>{this.mainSection.style.display='none';this.personsSection.style.display='block';this.asside.hide();$("#accordion1").accordion({active:'none'});$("#accordion2").accordion({active:'none'});window.location.href='#';});}}
module.exports=ChangeNav;},{"./asside":3}],5:[function(require,module,exports){class ChooseMainPersonTitle{constructor(){this.personTitle=document.querySelector('.main-persons-titile');this.semenTitleChoose=this.personTitle.querySelector('.semen-foto>.choosing');this.semenTitle=this.personTitle.querySelector('.semen-foto');this.slavjaTitleChoose=this.personTitle.querySelector('.slavja-foto>.choosing');this.slavjaTitle=this.personTitle.querySelector('.slavja-foto');this.lenaTitleChoose=this.personTitle.querySelector('.lena-foto>.choosing');this.lenaTitle=this.personTitle.querySelector('.lena-foto');this.alisaTitleChoose=this.personTitle.querySelector('.alisa-foto>.choosing');this.alisaTitle=this.personTitle.querySelector('.alisa-foto');this.mikuTitleChoose=this.personTitle.querySelector('.miku-foto>.choosing');this.mikuTitle=this.personTitle.querySelector('.miku-foto');this.uljanaTitleChoose=this.personTitle.querySelector('.uljana-foto>.choosing');this.uljanaTitle=this.personTitle.querySelector('.uljana-foto');this.pionerTitleChoose=this.personTitle.querySelector('.pioner-foto>.choosing');this.pionerTitle=this.personTitle.querySelector('.pioner-foto');this.juliaTitleChoose=this.personTitle.querySelector('.julia-foto>.choosing');this.juliaTitle=this.personTitle.querySelector('.julia-foto');this.personInfo=document.querySelector('.main-persons-info');this.semen=this.personInfo.querySelector('.semen');this.slavja=this.personInfo.querySelector('.slavia');this.lena=this.personInfo.querySelector('.lena');this.alisa=this.personInfo.querySelector('.alisa');this.miku=this.personInfo.querySelector('.miku');this.uljana=this.personInfo.querySelector('.uljana');this.pioner=this.personInfo.querySelector('.pioner');this.julia=this.personInfo.querySelector('.julia');}
init(){this.lenaTitle.classList.add('chosed-person');this.lena.style.display='block';this.semenTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.semenTitle.classList.add('chosed-person');this.semen.style.display='block';})
this.slavjaTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.slavjaTitle.classList.add('chosed-person');this.slavja.style.display='block';})
this.lenaTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.lenaTitle.classList.add('chosed-person');this.lena.style.display='block';})
this.alisaTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.alisaTitle.classList.add('chosed-person');this.alisa.style.display='block';})
this.mikuTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.mikuTitle.classList.add('chosed-person');this.miku.style.display='block';})
this.uljanaTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.uljanaTitle.classList.add('chosed-person');this.uljana.style.display='block';})
this.pionerTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.pionerTitle.classList.add('chosed-person');this.pioner.style.display='block';})
this.juliaTitleChoose.addEventListener('click',()=>{removeClass(this.personTitle);displayNone(this.personInfo)
this.juliaTitle.classList.add('chosed-person');this.julia.style.display='block';})
function removeClass(root){for(let i=0;i<root.children.length;i++){root.children[i].classList.remove('chosed-person');}}
function displayNone(element){for(let i=0;i<element.children.length;i++){element.children[i].style.display='none';}}}}
module.exports=ChooseMainPersonTitle;},{}],6:[function(require,module,exports){class ChoosePersons{constructor(){this.mainPersons=document.querySelector('.main-persons');this.mainData=document.querySelector('.main-persons-data');this.mainChoosed=document.querySelector('.main-persons .choosed');this.secondaryPersons=document.querySelector('.secondary-persons');this.secondaryData=document.querySelector('.secondary-persons-data');this.secondaryChoosed=document.querySelector('.secondary-persons .choosed');}
init(){this.mainPersons.addEventListener('click',()=>{this.mainPersons.style.boxShadow='inset 0 0 5px rgba(0, 0, 0, 0.5)';this.mainPersons.style.backgroundColor='#ffbc4d';this.mainChoosed.style.display='block';this.mainData.style.display='block';this.mainPersons.style.borderBottom='none';this.secondaryData.style.display='none';this.secondaryChoosed.style.display='none';this.secondaryPersons.style.boxShadow='';this.secondaryPersons.style.borderBottom='1px solid darkseagreen';this.secondaryPersons.style.backgroundColor='#9a9a9a';})
this.secondaryPersons.addEventListener('click',()=>{this.secondaryPersons.style.boxShadow='inset 0 0 5px rgba(0, 0, 0, 0.5)';this.secondaryPersons.style.backgroundColor='#ffbc4d';this.secondaryPersons.style.borderBottom='none';this.secondaryChoosed.style.display='block';this.secondaryData.style.display='block';this.mainData.style.display='none';this.mainChoosed.style.display='none';this.mainPersons.style.boxShadow='none';this.mainPersons.style.borderBottom='1px solid darkseagreen';this.mainPersons.style.backgroundColor='#9a9a9a';})}}
module.exports=ChoosePersons;},{}],7:[function(require,module,exports){class Comment{constructor(){let Request=require('./request');this.request=new Request();this.currentComment=null;this.pswd='17021991';}
init(){document.addEventListener('click',(e)=>{if(!e.target.matches('.comment__icon'))return;let apply=prompt('Введите пароль...');if(apply==this.pswd){this.currentComment=e.target.parentElement.dataset.id;this.request.delete(this.currentComment);this.currentComment=null;}else if(apply===null||apply===undefined){return;}else{alert("Пароль неверный!")}});}}
module.exports=Comment;},{"./request":14}],8:[function(require,module,exports){class Footer{constructor(){this.footer=document.querySelector('.footer-licence');}
init(){let date=new Date();let year=date.toLocaleDateString().slice(6);this.footer.append(`© Made by Gup@lyuk 2021-${year}`);}}
module.exports=Footer;},{}],9:[function(require,module,exports){class Form{constructor(){}
init(){let formContainer=document.querySelector('.proposition-form');let form=formContainer.querySelector('.form');let propName=formContainer.querySelector('.propos-name');let propEmail=formContainer.querySelector('.propos-email');let propTelephone=formContainer.querySelector('.propos-phone');let propText=formContainer.querySelector('.propos-text');let formSendBtn=formContainer.querySelector('.propos-btn');formSendBtn.addEventListener('click',()=>{if(propName.value.trim()===''||propEmail.value.trim()===''||propTelephone.value.trim()===''||propText.value.trim()===''){for(let i=0;i<form.children.length-1;i++){if(form.children[i].value.trim()===''){form.children[i].style.border='2px dashed rgba(255, 0, 0, 0.6)';}
if(form.children[i].value.trim()!==''){form.children[i].style.border='';}}
return}
let request={name:propName.value,mail:propEmail.value,phone:propTelephone.value,message:propText.value};fetch(Form.link,{headers:{'Content-Type':'application/json',},method:'POST',body:JSON.stringify(request)}).then(resp=>console.log(resp));let before=document.querySelector('.before');let sentAccept=formContainer.querySelector('.before .sent img');before.style.width='calc(100% + 20px)';before.style.borderBottomLeftRadius='10px';before.style.borderTopLeftRadius='10px';sentAccept.style.width='100%';sentAccept.style.transitionDuration='300ms';for(let i=0;i<form.children.length-1;i++){form.children[i].style.border='';}
setTimeout(()=>{propName.value='';propEmail.value='';propTelephone.value='';propText.value='';},1000);setTimeout(()=>{sentAccept.style.width='0%';sentAccept.style.transitionDuration='300ms';before.style.width='20px';before.style.borderBottomLeftRadius='';before.style.borderTopLeftRadius='';},2000);})}}
Form.link='https://formspree.io/f/xyyvgrww';module.exports=Form;},{}],10:[function(require,module,exports){class GetFullMinScreen{constructor(){this.mainSection=document.querySelector('.main-section');this.changeSize=document.querySelector('.full-min-screen');this.fullScreen=this.changeSize.querySelector('.full-screen');this.minScreen=this.changeSize.querySelector('.min-screen');this.screenStatus=false;}
init(){this.changeSize.addEventListener('click',()=>{if(this.screenStatus){this.mainSection.style.width='80%';this.minScreen.style.display='none';this.fullScreen.style.display='block';this.screenStatus=!this.screenStatus;}else{this.mainSection.style.width='100%';this.minScreen.style.display='block';this.fullScreen.style.display='none';this.screenStatus=!this.screenStatus;}})}}
module.exports=GetFullMinScreen;},{}],11:[function(require,module,exports){class GoUp{constructor(){this.getUp=document.querySelector('.get-up');this.section=document.querySelector('.for-go-up');}
init(){window.addEventListener('scroll',()=>{let currentPosition=this.section.getBoundingClientRect().y;if(currentPosition<=109){this.getUp.style.opacity='0.9';}
if(currentPosition>109){this.getUp.style.opacity='0';}
if(window.innerWidth<=660&&currentPosition<=80){this.getUp.style.opacity='0.9';}
if(window.innerWidth>=660&&currentPosition>=80){this.getUp.style.opacity='0';}});this.getUp.addEventListener('click'||'touchend',()=>{this.getUp.style.opacity='0';window.location.href='#';})}}
module.exports=GoUp;},{}],12:[function(require,module,exports){class Message{constructor(name,text,time){this.name=name;this.text=text;this.time=time;}}
module.exports=Message;},{}],13:[function(require,module,exports){class ModalWindow{constructor(){let Request=require('./request');this.request=new Request();this.windowRoot=document.querySelector('.modal');this.acceptBtn=this.windowRoot.querySelector('.btn-apl');this.closeBtn=this.windowRoot.querySelector('.btn-cls');this.userNameInput=this.windowRoot.querySelector('.input-name');this.userTextInput=this.windowRoot.querySelector('.input-text');this.acceptBtn.addEventListener('click',()=>this.sendMessage());this.closeBtn.addEventListener('click',()=>this.rejectInput());}
rejectInput(){setTimeout(()=>{this.userNameInput.value='';this.userTextInput.value='';},500);}
sendMessage(){if(this.userNameInput.value.trim()===''||this.userTextInput.value.trim()===''){alert('Вы что-то не указали. Комментарий НЕ будет сохранен!');setTimeout(()=>{this.userNameInput.value='';this.userTextInput.value='';},500);return}else{let Message=require('./message');this.windowRoot.style.display='none';let getDate=new Date();this.request.post(new Message(this.userNameInput.value,this.userTextInput.value,getDate.toLocaleString().slice(0,17)))
setTimeout(()=>{this.userNameInput.value='';this.userTextInput.value='';},500);}}}
module.exports=ModalWindow;},{"./message":12,"./request":14}],14:[function(require,module,exports){class Request{constructor(){this.root=document.querySelector('.all-comments');this.showHideBtn=document.querySelector('.get-all-comments');this.statusComment=document.querySelector('.status-comment');}
getLast(btn,info,dataset){if(btn&&info){btn.disabled=true;$.ajax({url:Request.url,method:'get',dataType:'json',success:(data)=>{let showElements=[data[data.length-2],data[data.length-1]]
this.root.innerHTML='';this.root.append(...showElements.map(e=>this.createElement(e)));this.root.dataset.hide=dataset;btn.disabled=false;btn.innerHTML=info;},error:err=>{this.statusComment.style.display='block';this.statusComment.innerHTML=`Отзывы не загружены по причине - "${err.statusText}"`;btn.disabled=false;}});}else{$.ajax({url:Request.url,method:'get',dataType:'json',success:(data)=>{let showElements=[data[data.length-2],data[data.length-1]]
this.root.innerHTML='';this.root.append(...showElements.map(e=>this.createElement(e)));},error:err=>{this.statusComment.style.display='block';this.statusComment.innerHTML=`Отзывы не загружены по причине - "${err.statusText}"`;}});}}
getAll(btn,info,dataset){btn.disabled=true;$.ajax({url:Request.url,method:'get',dataType:'json',success:(data)=>{this.root.innerHTML='';this.root.append(...data.map(e=>this.createElement(e)));btn.disabled=false;btn.innerHTML=info;this.root.dataset.hide=dataset;},error:err=>{this.statusComment.style.display='block';this.statusComment.innerHTML=`Отзывы не загружены по причине - "${err.statusText}"`;btn.disabled=false;}});}
post(data){$.ajax({url:Request.url,method:'post',dataType:'json',data:data,success:()=>{setTimeout(()=>{if(this.root.dataset.hide=='true'){this.getLast(this.showHideBtn,'Показать все отзывы','true');}else{this.getAll(this.showHideBtn,'Скрыть отзывы','false');}},1000);},error:err=>{this.statusComment.style.display='block';this.statusComment.innerHTML=`Отзыв не добавлен по причине - "${err.statusText}"`;}});}
delete(comment){$.ajax({url:`${Request.url}/${comment}`,method:'DELETE',success:()=>{setTimeout(()=>{if(this.root.dataset.hide=='true'){this.getLast(this.showHideBtn,'Показать все отзывы','true');}else{this.getAll(this.showHideBtn,'Скрыть отзывы','false');}},1000);},error:err=>{this.statusComment.style.display='block';this.statusComment.innerHTML=`Отзыв не удален по причине - "${err.statusText}"`;}});}
createElement(elem){let element=document.createElement('div');element.classList.add('comment');element.dataset.id=`${elem.id}`
let icon=document.createElement('div');icon.classList.add('comment__icon');let name=document.createElement('div');name.classList.add('comment__name');name.append(elem.name);let time=document.createElement('div');time.classList.add('comment__time');time.append(elem.time);let text=document.createElement('div');text.classList.add('comment__text');let commentSpanStart=document.createElement('span')
commentSpanStart.append('«');let commentSpanSEnd=document.createElement('span')
commentSpanSEnd.append('»');text.append(elem.text);text.prepend(commentSpanStart);text.append(commentSpanSEnd);element.append(icon);element.append(name);element.append(time);element.append(text);return element;}}
Request.url='https://61fac1d387801d0017a2c252.mockapi.io/example/comments';module.exports=Request;},{}],15:[function(require,module,exports){class ScalePhoto{init(){let bodyElement=document.querySelector('body');let modalWindow=document.querySelector('.modal-window');let modalLeft=document.querySelector('.left');let modalRight=document.querySelector('.right');let modalClose=document.querySelector('.close');let currPhotoIndex=null;let currSectionName=null;document.addEventListener('click',e=>showPhoto(e));modalClose.addEventListener('click',()=>close());modalRight.addEventListener('click',()=>getNextPhoto());modalLeft.addEventListener('click',()=>getPrevPhoto());function showPhoto(e){let image=e.target;if(!image.matches('.photo'))return
currSectionName=`.${image.parentElement.className}`;let currentSection=document.querySelector(currSectionName);if(currentSection.children.length===1){modalLeft.style.display='none';modalRight.style.display='none';}else{modalLeft.style.display='block';modalRight.style.display='block';}
setDataIndex(currentSection);currPhotoIndex=image.dataset.index;bodyElement.style.overflow='hidden';let currentPhoto=currentSection.children[currPhotoIndex];let currentPhotoLink=currentPhoto.getAttribute('src');let bigPhoto=document.createElement('img');bigPhoto.setAttribute('src',currentPhotoLink);bigPhoto.classList.add('big-photo');bigPhoto.dataset.index=currPhotoIndex;modalWindow.prepend(bigPhoto);modalWindow.style.display='flex';}
function close(){modalWindow.style.display='none';bodyElement.style.overflow='';modalWindow.firstElementChild.remove();document.removeEventListener('click',showPhoto);}
function getNextPhoto(){let section=document.querySelector(currSectionName);let modalElementIndex=modalWindow.firstElementChild.dataset.index;let sectionElementIndex=section.children[modalElementIndex].dataset.index;let nextIndex=(sectionElementIndex*1+1);if(nextIndex===section.children.length){nextIndex=section.firstElementChild.dataset.index;}
let nextLink=section.children[nextIndex].getAttribute('src');modalWindow.firstElementChild.setAttribute('src',nextLink);modalWindow.firstElementChild.dataset.index=nextIndex;}
function getPrevPhoto(){let section=document.querySelector(currSectionName);let modalElementIndex=modalWindow.firstElementChild.dataset.index;let sectionElementIndex=section.children[modalElementIndex].dataset.index;let prevIndex=(sectionElementIndex*1-1);if(prevIndex<0){prevIndex=section.lastElementChild.dataset.index;}
let prevLink=section.children[prevIndex].getAttribute('src');modalWindow.firstElementChild.setAttribute('src',prevLink);modalWindow.firstElementChild.dataset.index=prevIndex;}
function setDataIndex(section){for(let i=0;i<section.children.length;i++){section.children[i].dataset.index=i;}}}}
module.exports=ScalePhoto;},{}],16:[function(require,module,exports){class ShowHideComments{constructor(){let Request=require('./request');this.request=new Request();this.showHideBtn=document.querySelector('.get-all-comments');this.allComments=document.querySelector('.all-comments');this.hide=this.allComments.dataset.hide;}
init(){this.showHideBtn.addEventListener('click',()=>{this.hide=!this.hide;if(!this.hide){this.request.getAll(this.showHideBtn,'Скрыть отзывы','false');this.allComments.dataset.hide='false';window.location='#comments';}else{this.request.getLast(this.showHideBtn,'Показать все отзывы','true');this.allComments.dataset.hide='true';window.location='#comments';}})}}
module.exports=ShowHideComments;},{"./request":14}],17:[function(require,module,exports){class ShowTrailer{constructor(){this.body=document.querySelector('body');this.mainSectionTrailer=document.querySelector('.main-section__trailer');this.modalTrailer=document.querySelector('.modal-trailer');this.close=document.querySelector('.close-vid');this.showTrailerBtn=this.mainSectionTrailer.querySelector('.see-vid');this.video=this.modalTrailer.querySelector('.modal-trailer video');}
init(){this.showTrailerBtn.addEventListener('click',()=>{this.body.style.overflow='hidden';this.modalTrailer.style.display='flex';this.modalTrailer.style.opacity='1';});this.close.addEventListener('click',()=>{this.body.style.overflow='';this.modalTrailer.style.display='none';this.modalTrailer.style.opacity='0';this.video.pause();})}}
module.exports=ShowTrailer;},{}]},{},[1])